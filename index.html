<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper, Scissors</title>
</head>
<body>
    <script>
        function getComputerChoice() {
            return ['Rock', 'Paper', 'Scissors'][Math.floor(Math.random() * 3)];
        }
        
        function capitalizeString(string) {
            return string[0].toUpperCase() + string.slice(1);
        }

        function playRound(playerSelection, computerSelection) {
            let lcPlayerSelection = playerSelection.trim().toLowerCase();
            let lcComputerSelection = computerSelection.trim().toLowerCase()

            // console.log("player selecton: " + lcPlayerSelection);
            // console.log("computer selection: " + lcComputerSelection);

            if (lcPlayerSelection === "rock" && lcComputerSelection === 'scissors') {
                return "You Win! Rock beats Scissors";
            } else if (lcPlayerSelection === 'scissors' && lcComputerSelection === 'paper') {
                return "You Win! Scissors beat Paper";
            } else if (lcPlayerSelection === 'paper' && lcComputerSelection === 'rock') {
                return "You Win! Paper beats Rock";
            } else if (lcPlayerSelection === "scissors" && lcComputerSelection === 'rock') {
                return "You Lose! Rock beats Scissors";
            } else if (lcPlayerSelection === 'paper' && lcComputerSelection === 'scissors') {
                return "You Lose! Scissors beat Paper";
            } else if (lcPlayerSelection === 'rock' && lcComputerSelection === 'paper') {
                return "You Win! Paper beats Rock";
            } else {
                return `Tie! ${capitalizeString(lcPlayerSelection)} doesn't beat ` + 
                `${capitalizeString(lcComputerSelection)}`;
            }
        }

        function checkInputValidity(string) {
            return ['rock', 'paper', 'scissors'].includes(string.toLowerCase());
        }

        function game() {
            let playerScore = 0;
            let computerScore = 0;

            for (let i = 0; i < 4; ++i) {
                let userSelection = prompt('Enter "Rock", "Paper", or "Scissors"');
                while (!(checkInputValidity(userSelection))) {
                    userSelection = prompt('Wrong Input! Enter "Rock", "Paper", or "Scissors"');
                }
                
                let output = playRound(userSelection, getComputerChoice());
                
                switch (output) {
                    case output.startsWith('You Win!'):
                        ++playerScore;
                        break;
                    case output.startsWith('You Lose!'):
                        ++computerScore;
                        break;
                }
            }
        }
        game()
        // console.log(playRound('paper', getComputerChoice()))
    </script>
</body>
</html>